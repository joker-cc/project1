[{"D:\\Project\\React\\project1\\src\\index.js":"1","D:\\Project\\React\\project1\\src\\model\\store.js":"2","D:\\Project\\React\\project1\\src\\AppRouter.js":"3","D:\\Project\\React\\project1\\src\\pages\\Demo\\Demo.js":"4","D:\\Project\\React\\project1\\src\\model\\Demo\\actionCreator.js":"5","D:\\Project\\React\\project1\\src\\model\\Demo\\redecer.js":"6","D:\\Project\\React\\project1\\src\\model\\Demo\\effect.js":"7","D:\\Project\\React\\project1\\src\\model\\Demo\\actionType.js":"8","D:\\Project\\React\\project1\\src\\pages\\Demo\\index.js":"9","D:\\Project\\React\\project1\\src\\pages\\ReactDndDemo\\index.js":"10","D:\\Project\\React\\project1\\src\\pages\\ReactDndDemo\\Container.js":"11","D:\\Project\\React\\project1\\src\\pages\\ReactDndDemo\\Card.js":"12","D:\\Project\\React\\project1\\src\\pages\\TreeDemo\\index.js":"13","D:\\Project\\React\\project1\\src\\pages\\TreeDemo\\NodeView.js":"14"},{"size":170,"mtime":1613107719435,"results":"15","hashOfConfig":"16"},{"size":363,"mtime":1613109311373,"results":"17","hashOfConfig":"16"},{"size":832,"mtime":1615949550031,"results":"18","hashOfConfig":"16"},{"size":1541,"mtime":1613109301637,"results":"19","hashOfConfig":"16"},{"size":425,"mtime":1611502745926,"results":"20","hashOfConfig":"16"},{"size":640,"mtime":1611502185539,"results":"21","hashOfConfig":"16"},{"size":418,"mtime":1611503054955,"results":"22","hashOfConfig":"16"},{"size":184,"mtime":1611501752932,"results":"23","hashOfConfig":"16"},{"size":409,"mtime":1613110025604,"results":"24","hashOfConfig":"16"},{"size":368,"mtime":1615213526271,"results":"25","hashOfConfig":"16"},{"size":1372,"mtime":1615213886432,"results":"26","hashOfConfig":"16"},{"size":2935,"mtime":1615949350755,"results":"27","hashOfConfig":"16"},{"size":110,"mtime":1615951673405,"results":"28","hashOfConfig":"16"},{"size":288,"mtime":1615952854849,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"1gtvliq",{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"32"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"32"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\Project\\React\\project1\\src\\index.js",[],["61","62"],"D:\\Project\\React\\project1\\src\\model\\store.js",[],"D:\\Project\\React\\project1\\src\\AppRouter.js",[],"D:\\Project\\React\\project1\\src\\pages\\Demo\\Demo.js",[],"D:\\Project\\React\\project1\\src\\model\\Demo\\actionCreator.js",[],"D:\\Project\\React\\project1\\src\\model\\Demo\\redecer.js",[],"D:\\Project\\React\\project1\\src\\model\\Demo\\effect.js",[],"D:\\Project\\React\\project1\\src\\model\\Demo\\actionType.js",[],"D:\\Project\\React\\project1\\src\\pages\\Demo\\index.js",[],"D:\\Project\\React\\project1\\src\\pages\\ReactDndDemo\\index.js",[],"D:\\Project\\React\\project1\\src\\pages\\ReactDndDemo\\Container.js",[],"D:\\Project\\React\\project1\\src\\pages\\ReactDndDemo\\Card.js",["63","64"],"/*\r\n * @Description: 3 核心层Card\r\n * @Date: 2021-01-28 17:30:24\r\n * @LastEditTime: 2021-02-03 10:07:19\r\n */\r\nimport React, { useRef } from 'react'\r\nimport { useDrag, useDrop, DropTargetMonitor } from 'react-dnd'\r\nimport { XYCoord } from 'dnd-core'\r\nexport const ItemTypes = {\r\n  CARD: 'card',\r\n}\r\n\r\nconst style = {\r\n  padding: '0.5rem 1rem',\r\n  marginBottom: '.5rem',\r\n  backgroundColor: 'green',\r\n}\r\n\r\nexport const Card = ({ id, text, index, moveCard }) => {\r\n  const ref1 = useRef(null)\r\n  \r\n  // 拖动组件 useDrag返回[collect方法返回的对象,引用]\r\n  const [{ isDragging }, drag] = useDrag({\r\n    // 指定拖动元素的类型（drop中的accept需要和这个一致），同时传递其他数据\r\n    item: { type: ItemTypes.CARD, id, index },\r\n    // canDrag: monitor => false,\r\n    // collect函数获取isDragging\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  })  \r\n  \r\n  // 接收组件\r\n  const [, drop] = useDrop({\r\n    // 指定接收组件接收的拖动元素类型\r\n    accept: ItemTypes.CARD,\r\n    drop: (item, monitor) => ({ type: ItemTypes.CARD, id: 'qweqew', index: 100 }),\r\n    // 拖动元素在接收组件上方时触发\r\n    hover: (item, monitor) => {\r\n\r\n      // 判空？我还不明白，可能是空列表:<\r\n      if (!ref1.current) {\r\n        return\r\n      }\r\n\r\n      // 拖动元素的index\r\n      const dragIndex = item.index\r\n      // 悬浮元素的index\r\n      const hoverIndex = index\r\n\r\n      // 如果拖动元素的index  等于  悬浮元素的index，return\r\n      if (dragIndex === hoverIndex) {\r\n        return\r\n      }\r\n\r\n      // 确定屏幕上的矩形，ref.current是div元素，getBoundingClientRect用于获取某个元素相对于视窗的位置集合\r\n      const hoverBoundingRect = ref1.current?.getBoundingClientRect()\r\n\r\n      // 获取屏幕矩形的中点Y\r\n      const hoverMiddleY =(hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\r\n\r\n      // 获取组件当前的偏移(变化)\r\n      const clientOffset = monitor.getClientOffset()\r\n\r\n      // 获取偏移后到顶部的距离\r\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top\r\n\r\n      // 向下拖动但拖动的光标在中点之上，return\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return\r\n      }\r\n\r\n      // 向上拖动但拖动的光标在中点之下\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return\r\n      }\r\n\r\n      // 数组删除和插入操作(交换)\r\n      moveCard(dragIndex, hoverIndex)\r\n      \r\n      // 交换后拖动元素的index是hoverIndex\r\n      item.index = hoverIndex\r\n    },\r\n  })\r\n\r\n  const opacity = isDragging ? 0 : 1\r\n  \r\n  // 1 让组件既可以被拖动也可以接收拖动元素\r\n  drag(drop(ref1))\r\n\r\n  // 2 将ref引用赋值给组件\r\n  return (\r\n    <div ref={ref1} style={{ ...style, opacity }}>\r\n      {text}\r\n    </div>\r\n  )\r\n}\r\n","D:\\Project\\React\\project1\\src\\pages\\TreeDemo\\index.js",["65"],"import NodeView from './NodeView';\r\n\r\nexport default () => {\r\n  return <NodeView header=\"1\" content=\"1\" />;\r\n}","D:\\Project\\React\\project1\\src\\pages\\TreeDemo\\NodeView.js",[],{"ruleId":"66","replacedBy":"67"},{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","severity":1,"message":"71","line":7,"column":28,"nodeType":"72","messageId":"73","endLine":7,"endColumn":45},{"ruleId":"70","severity":1,"message":"74","line":8,"column":10,"nodeType":"72","messageId":"73","endLine":8,"endColumn":17},{"ruleId":"75","severity":1,"message":"76","line":3,"column":1,"nodeType":"77","endLine":5,"endColumn":2},"no-native-reassign",["78"],"no-negated-in-lhs",["79"],"no-unused-vars","'DropTargetMonitor' is defined but never used.","Identifier","unusedVar","'XYCoord' is defined but never used.","import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","no-global-assign","no-unsafe-negation"]